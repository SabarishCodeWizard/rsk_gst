<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PR FABRICS - Invoice Generator</title>
    <link rel="stylesheet" href="css/styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script>
        // Check if user is logged in
        if (sessionStorage.getItem('isLoggedIn') !== 'true') {
            window.location.href = 'login.html';
        }
    </script>
</head>

<body>
    <div class="container">
        <div class="controls">
            <h1 class="bill-system-header">
                <a href="#" class="brand-name">PR FABRICS GST</a>
                <span class="system-name">Accounting Software</span>
            </h1>
            <a href="index.html" class="dashboard active">
                <i class="fas fa-file-invoice"></i> New BILL
            </a>

            <a href="invoice-history.html" class="view-history-btn">
                <i class="fas fa-history"></i> View Invoice History
            </a>

            <a href="customer-details.html" class="view-history-btn">
                <i class="fas fa-users"></i> Customer Details
            </a>

            <a href="shortcut.html" class="view-history-btn">
                <i class="fas fa-bolt"></i> Product Shortcuts
            </a>

            <a href="recycle-bin.html" class="view-history-btn">
                <i class="fas fa-trash-restore"></i> Recycle Bin
            </a>

            <div class="button-group">
                <button id="generatePDF">
                    <i class="fas fa-file-invoice"></i> Generate BILL
                </button>

                <button id="saveBill">
                    <i class="fas fa-save"></i> Save BILL
                </button>

                <button id="resetForm">
                    <i class="fas fa-undo"></i> Reset BILL
                </button>

                <button id="generateEwayBill" class="eway-bill-btn">
                <i class="fas fa-truck"></i> Generate E-Way Bill
            </button>
            </div>

            <button id="logoutBtn">
                <i class="fas fa-sign-out-alt"></i> Logout
            </button>
        </div>

        <div class="content">
            <div id="invoice" class="invoice-container">
                <div class="invoice-header">
                    <div class="company-details">
                        <h2> PR FABRICS</h2>
                        <p>42/65, THIRUNEELAKANDA PURAM, 1ST STREET,</p>
                        <p>TIRUPUR 641-602. CELL NO: 9952520181</p>
                        <p>GSTIN: 33CLJPG4331G1ZG</p>
                    </div>

                    <!-- Add this after the calculation-section div and before the bank-details div -->
                    <div class="invoice-suggestions">
                        <div class="suggestion-content">
                            <div class="suggestion-row">
                                <div class="suggestion-item">
                                    <label>Last Invoice:</label>
                                    <span id="lastInvoiceNumber">--</span>
                                </div>
                                <div class="suggestion-item">
                                    <label>Next Suggested:</label>
                                    <span id="nextInvoiceNumber">--</span>
                                </div>
                            </div>
                            <div class="suggestion-actions">
                                <button type="button" id="applySuggestion">
                                    <i class="fas fa-magic"></i> Apply Suggestion
                                </button>
                                <button type="button" id="refreshSuggestions">
                                    <i class="fas fa-sync-alt"></i> Refresh
                                </button>
                            </div>
                            <div class="financial-year-info">
                                <small>Financial Year: <span id="currentFinancialYear">--</span></small>
                            </div>
                        </div>
                    </div>
                    <div class="invoice-title">
                        <h2>Tax Invoice</h2>
                        <div class="invoice-number">
                            <label for="invoiceNo">Invoice No:</label>
                            <input type="text" id="invoiceNo" placeholder="e.g. 015">
                        </div>
                        <div class="invoice-date">
                            <label for="invoiceDate">Invoice Date:</label>
                            <input type="date" id="invoiceDate">
                        </div>
                    </div>
                </div>

                <div class="billing-info">
                    <div class="bill-to">
                        <h3>Bill to Party</h3>
                        <div class="form-group">
                            <input type="text" id="customerPhone" placeholder="e.g. 9876543210" maxlength="10">
                        </div>
                        <div class="form-group">
                            <label for="customerName">Name:</label>
                            <input type="text" id="customerName" placeholder="e.g. SLN TEX">
                        </div>
                        <div class="form-group">
                            <label for="customerAddress">Address:</label>
                            <input type="text" id="customerAddress"
                                placeholder="e.g. 1/1B,EAST Extn,M.S.NAGAR, TIRUPUR-7">
                        </div>
                        <div class="form-group">
                            <label for="customerGSTIN">GSTIN:</label>
                            <input type="text" id="customerGSTIN" placeholder="e.g. 33DNSPS0423P2ZD">
                        </div>
                        <div class="form-group">
                            <label for="state">State:</label>
                            <input type="text" id="state" value="TAMILNADU">
                            <label for="stateCode">Code:</label>
                            <input type="text" id="stateCode" value="33" class="short-input">
                        </div>
                    </div>
                    <div class="shipping-info">
                        <div class="form-group">
                            <label for="transportMode">Transport Mode:</label>
                            <input type="text" id="transportMode">
                        </div>
                        <div class="form-group">
                            <label for="vehicleNumber">Vehicle number:</label>
                            <input type="text" id="vehicleNumber">
                        </div>
                        <div class="form-group">
                            <label for="supplyDate">Date of Supply:</label>
                            <input type="date" id="supplyDate">
                        </div>
                        <div class="form-group">
                            <label for="placeOfSupply">Place of Supply:</label>
                            <input type="text" id="placeOfSupply">
                        </div>
                        <div class="form-group">
                            <label for="reverseCharge">Reverse Charge (Y/N):</label>
                            <select id="reverseCharge">
                                <option value="N">N</option>
                                <option value="Y">Y</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="product-table-container">
                    <table id="productTable">
                        <thead>
                            <tr>
                                <th>S.No.</th>
                                <th>Product Description</th>
                                <th>HSN code</th>
                                <th>Qty</th>
                                <th>Rate</th>
                                <th>Amount</th>
                                <th>Taxable Value</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="productTableBody">
                            <tr>
                                <td>1</td>
                                <td><input type="text" class="product-description"></td>
                                <td><input type="text" class="hsn-code"></td>
                                <td><input type="number" class="qty" value="0"></td>
                                <td><input type="number" class="rate" value="0.00"></td>
                                <td class="amount">0.00</td>
                                <td class="taxable-value">0.00</td>
                                <td><button class="remove-row">X</button></td>
                            </tr>
                        </tbody>
                    </table>
                    <button id="addRow">Add Product</button>
                </div>

                <div class="calculation-section">
                    <div class="tax-calculation">
                        <div class="tax-row">
                            <label>Total:</label>
                            <span id="subTotal">0.00</span>
                        </div>
                        <div class="tax-row">
                            <label for="cgstRate">Add: CGST:</label>
                            <input type="number" id="cgstRate" value="2.5" class="tax-rate">%
                            <span id="cgstAmount">0.00</span>
                        </div>
                        <div class="tax-row">
                            <label for="sgstRate">Add: SGST:</label>
                            <input type="number" id="sgstRate" value="2.5" class="tax-rate">%
                            <span id="sgstAmount">0.00</span>
                        </div>
                        <div class="tax-row">
                            <label for="igstRate">Add: IGST:</label>
                            <input type="number" id="igstRate" value="0" class="tax-rate">%
                            <span id="igstAmount">0.00</span>
                        </div>
                        <div class="tax-row">
                            <label>Total Tax Amount:</label>
                            <span id="totalTaxAmount">0.00</span>
                        </div>
                        <div class="tax-row">
                            <label>Round Off:</label>
                            <span id="roundOff">0.00</span>
                        </div>
                        <div class="tax-row total">
                            <label>Total Amount after Tax:</label>
                            <span id="grandTotal">0.00</span>
                        </div>
                        <div class="tax-row">
                            <label>Amount in Words:</label>
                            <span id="amountInWords">Zero rupees only</span>
                        </div>
                    </div>



                    <div class="bank-details">
                        <h3>Bank Details</h3>
                        <div class="bank-row">
                            <label>NAME:</label>
                            <span>PR FABRICS</span>
                        </div>
                        <div class="bank-row">
                            <label>BANK NAME:</label>
                            <span>CANARA BANK</span>
                        </div>
                        <div class="bank-row">
                            <label>BANK A/C NO:</label>
                            <span>65631010003339
                            </span>
                        </div>
                        <div class="bank-row">
                            <label>BANK IFSC CODE:</label>
                            <span>CNRB0016563</span>
                        </div>
                    </div>
                </div>

                <div class="signature-section">
                    <div class="declaration">
                        <p>Certified that the particulars given above are true and correct</p>
                        <p>**TERMS AND CONDITIONS APPLY FOR PR FABRICS</p>
                    </div>
                    <div class="customer-signature">
                        <p>Agreed and accepted the conditions and signed</p>
                        <p class="signature-line">Signature of Customer</p>
                        <p>Authorized signatory</p>
                    </div>
                    <div class="company-signature">
                        <p class="signature-line">For PR FABRICS</p>
                        <p>Authorized signatory</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="js/db.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/pdf.js"></script>
    <script src="js/script.js"></script>
</body>

</html>